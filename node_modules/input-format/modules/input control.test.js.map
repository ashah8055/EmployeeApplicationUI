{"version":3,"sources":["../source/input control.test.js"],"names":["TEMPLATE","parse","parseDigit","format","describe","it","input","value","selectionStart","selectionEnd","setSelectionRange","position","on_change","_","expect","to","equal","done","setTimeout","be","undefined","event","keyCode","Keys","Delete","preventDefault","Backspace"],"mappings":"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","file":"input control.test.js","sourcesContent":["import\r\n{\r\n\tonChange,\r\n\tonCut,\r\n\tonPaste,\r\n\tonKeyDown\r\n}\r\nfrom './input control'\r\n\r\nimport { Keys } from './dom'\r\n\r\nimport templateParser from './template parser'\r\nimport templateFormatter from './template formatter'\r\nimport parseDigit from './parse digit'\r\n\r\n// US phone number template\r\nconst TEMPLATE = '(xxx) xxx-xxxx'\r\nconst parse = templateParser(TEMPLATE, parseDigit)\r\nconst format = templateFormatter(TEMPLATE)\r\n\r\ndescribe('input control', function()\r\n{\r\n\tit('should handle onChange', function()\r\n\t{\r\n\t\tconst input =\r\n\t\t{\r\n\t\t\tvalue: '1234567-',\r\n\t\t\tselectionStart: 5,\r\n\t\t\tselectionEnd: 6,\r\n\t\t\tsetSelectionRange(position)\r\n\t\t\t{\r\n\t\t\t\tthis.selectionStart = position\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet value\r\n\t\tconst on_change = _ => value = _\r\n\r\n\t\tonChange({}, input, parse, format, on_change)\r\n\r\n\t\texpect(input.value).to.equal('(123) 456-7')\r\n\t\texpect(input.selectionStart).to.equal(8)\r\n\t\texpect(value).to.equal('1234567')\r\n\t})\r\n\r\n\tit('should handle onCut', function(done)\r\n\t{\r\n\t\tconst input =\r\n\t\t{\r\n\t\t\tvalue: '1234567-',\r\n\t\t\tselectionStart: 5,\r\n\t\t\tselectionEnd: 6,\r\n\t\t\tsetSelectionRange(position)\r\n\t\t\t{\r\n\t\t\t\tthis.selectionStart = position\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet value\r\n\t\tconst on_change = _ => value = _\r\n\r\n\t\tonCut({}, input, parse, format, on_change)\r\n\r\n\t\tsetTimeout(() =>\r\n\t\t{\r\n\t\t\texpect(input.value).to.equal('(123) 456-7')\r\n\t\t\texpect(input.selectionStart).to.equal(8)\r\n\t\t\texpect(value).to.equal('1234567')\r\n\t\t\tdone()\r\n\t\t},\r\n\t\t0)\r\n\t})\r\n\r\n\tit('should handle onPaste', function()\r\n\t{\r\n\t\tconst input =\r\n\t\t{\r\n\t\t\tvalue: '1234567-',\r\n\t\t\tselectionStart: 5,\r\n\t\t\tselectionEnd: 5,\r\n\t\t\tsetSelectionRange(position)\r\n\t\t\t{\r\n\t\t\t\tthis.selectionStart = position\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet value\r\n\t\tconst on_change = _ => value = _\r\n\r\n\t\tonPaste({}, input, parse, format, on_change)\r\n\r\n\t\texpect(input.value).to.equal('(123) 456-7')\r\n\t\texpect(input.selectionStart).to.equal(8)\r\n\t\texpect(value).to.equal('1234567')\r\n\t})\r\n\r\n\tit('should handle onPaste (with selection)', function()\r\n\t{\r\n\t\tconst input =\r\n\t\t{\r\n\t\t\tvalue: '1234567-',\r\n\t\t\tselectionStart: 5,\r\n\t\t\tselectionEnd: 6,\r\n\t\t\tsetSelectionRange(position)\r\n\t\t\t{\r\n\t\t\t\tthis.selectionStart = position\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet value\r\n\t\tconst on_change = _ => value = _\r\n\r\n\t\tonPaste({}, input, parse, format, on_change)\r\n\r\n\t\texpect(input.value).to.equal('(123) 457')\r\n\t\texpect(input.selectionStart).to.equal(8)\r\n\t\texpect(value).to.equal('123457')\r\n\t})\r\n\r\n\tit('should not handle onKeyDown', function()\r\n\t{\r\n\t\tconst input =\r\n\t\t{\r\n\t\t\tvalue: '1234567-',\r\n\t\t\tselectionStart: 5,\r\n\t\t\tselectionEnd: 6,\r\n\t\t\tsetSelectionRange(position)\r\n\t\t\t{\r\n\t\t\t\tthis.selectionStart = position\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tlet value\r\n\t\tconst on_change = _ => value = _\r\n\r\n\t\tonKeyDown({}, input, parse, format, on_change)\r\n\r\n\t\texpect(input.value).to.equal('1234567-')\r\n\t\texpect(input.selectionStart).to.equal(5)\r\n\t\texpect(value).to.be.undefined\r\n\t})\r\n\r\n\tit('should handle onKeyDown (Delete)', function()\r\n\t{\r\n\t\tconst input =\r\n\t\t{\r\n\t\t\tvalue: '1234567-',\r\n\t\t\tselectionStart: 5,\r\n\t\t\tselectionEnd: 5,\r\n\t\t\tsetSelectionRange(position)\r\n\t\t\t{\r\n\t\t\t\tthis.selectionStart = position\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst event =\r\n\t\t{\r\n\t\t\tkeyCode: Keys.Delete,\r\n\t\t\tpreventDefault() {}\r\n\t\t}\r\n\r\n\t\tlet value\r\n\t\tconst on_change = _ => value = _\r\n\r\n\t\tonKeyDown(event, input, parse, format, on_change)\r\n\r\n\t\texpect(input.value).to.equal('(123) 457')\r\n\t\texpect(input.selectionStart).to.equal(8)\r\n\t\texpect(value).to.equal('123457')\r\n\t})\r\n\r\n\tit('should handle onKeyDown (Backspace)', function()\r\n\t{\r\n\t\tconst input =\r\n\t\t{\r\n\t\t\tvalue: '1234567-',\r\n\t\t\tselectionStart: 5,\r\n\t\t\tselectionEnd: 5,\r\n\t\t\tsetSelectionRange(position)\r\n\t\t\t{\r\n\t\t\t\tthis.selectionStart = position\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst event =\r\n\t\t{\r\n\t\t\tkeyCode: Keys.Backspace,\r\n\t\t\tpreventDefault() {}\r\n\t\t}\r\n\r\n\t\tlet value\r\n\t\tconst on_change = _ => value = _\r\n\r\n\t\tonKeyDown(event, input, parse, format, on_change)\r\n\r\n\t\texpect(input.value).to.equal('(123) 467')\r\n\t\texpect(input.selectionStart).to.equal(7)\r\n\t\texpect(value).to.equal('123467')\r\n\t})\r\n\r\n\tit('should handle onKeyDown (Backspace with selection)', function()\r\n\t{\r\n\t\tconst input =\r\n\t\t{\r\n\t\t\tvalue: '1234567-',\r\n\t\t\tselectionStart: 4,\r\n\t\t\tselectionEnd: 6,\r\n\t\t\tsetSelectionRange(position)\r\n\t\t\t{\r\n\t\t\t\tthis.selectionStart = position\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst event =\r\n\t\t{\r\n\t\t\tkeyCode: Keys.Backspace,\r\n\t\t\tpreventDefault() {}\r\n\t\t}\r\n\r\n\t\tlet value\r\n\t\tconst on_change = _ => value = _\r\n\r\n\t\tonKeyDown(event, input, parse, format, on_change)\r\n\r\n\t\texpect(input.value).to.equal('(123) 47')\r\n\t\texpect(input.selectionStart).to.equal(7)\r\n\t\texpect(value).to.equal('12347')\r\n\t})\r\n\r\n\tit('should handle onKeyDown (Delete with selection)', function()\r\n\t{\r\n\t\tconst input =\r\n\t\t{\r\n\t\t\tvalue: '1234567-',\r\n\t\t\tselectionStart: 4,\r\n\t\t\tselectionEnd: 6,\r\n\t\t\tsetSelectionRange(position)\r\n\t\t\t{\r\n\t\t\t\tthis.selectionStart = position\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst event =\r\n\t\t{\r\n\t\t\tkeyCode: Keys.Delete,\r\n\t\t\tpreventDefault() {}\r\n\t\t}\r\n\r\n\t\tlet value\r\n\t\tconst on_change = _ => value = _\r\n\r\n\t\tonKeyDown(event, input, parse, format, on_change)\r\n\r\n\t\texpect(input.value).to.equal('(123) 47')\r\n\t\texpect(input.selectionStart).to.equal(7)\r\n\t\texpect(value).to.equal('12347')\r\n\t})\r\n})"]}