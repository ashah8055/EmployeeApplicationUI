{"version":3,"sources":["../source/FadeInOut.js"],"names":["FadeInOut","props","state","show","hide","fadeOutDuration","clearTimeout","showTimer","_isMounted","setState","fadeIn","fadeOut","hideTimer","setTimeout","children","Children","count","Error","prevProps","fadeInInitially","fadeInDuration","opacity","transition","getFadeInStyle","getFadeOutStyle","undefined","SHOWN_STYLE","HIDDEN_STYLE","fadeInClassName","style","cloneElement","className","getStyle","Component","propTypes","bool","isRequired","number","string","element","defaultProps"],"mappings":"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","file":"FadeInOut.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\n\r\nexport default class FadeInOut extends React.Component {\r\n\tstatic propTypes = {\r\n\t\tshow: PropTypes.bool.isRequired,\r\n\t\tfadeInInitially: PropTypes.bool.isRequired,\r\n\t\tfadeInDuration: PropTypes.number,\r\n\t\tfadeOutDuration: PropTypes.number,\r\n\t\tfadeInClassName: PropTypes.string,\r\n\t\tchildren: PropTypes.element.isRequired\r\n\t}\r\n\r\n\tstatic defaultProps = {\r\n\t\tshow: false,\r\n\t\tfadeInInitially: false,\r\n\t\tfadeInDuration: 0,\r\n\t\tfadeOutDuration: 0\r\n\t}\r\n\r\n\tstate = {\r\n\t\tshow: this.props.show\r\n\t}\r\n\r\n\tconstructor(props)\r\n\t{\r\n\t\tsuper(props)\r\n\r\n\t\tif (typeof props.children === 'string' || React.Children.count(props.children) !== 1) {\r\n\t\t\tthrow new Error('`<FadeInOut/>` expect an element as a child.')\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps)\r\n\t{\r\n\t\tif (!prevProps.show && this.props.show) {\r\n\t\t\tthis.show()\r\n\t\t} else if (prevProps.show && !this.props.show) {\r\n\t\t\tthis.hide()\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount()\r\n\t{\r\n\t\tconst { show, fadeInInitially } = this.props\r\n\r\n\t\tthis._isMounted = true\r\n\r\n\t\tif (show && fadeInInitially) {\r\n\t\t\tthis.show()\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount()\r\n\t{\r\n\t\tthis._isMounted = false\r\n\r\n\t\tclearTimeout(this.showTimer)\r\n\t\tclearTimeout(this.hideTimer)\r\n\t}\r\n\r\n\tshow()\r\n\t{\r\n\t\tclearTimeout(this.showTimer)\r\n\t\tclearTimeout(this.hideTimer)\r\n\r\n\t\tthis.setState\r\n\t\t({\r\n\t\t\tshow : true,\r\n\t\t\tfadeIn : false,\r\n\t\t\tfadeOut : false\r\n\t\t})\r\n\r\n\t\tthis.showTimer = setTimeout(() =>\r\n\t\t{\r\n\t\t\tif (this._isMounted) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tfadeIn: true\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\t// Adding a non-null delay in order to\r\n\t\t// prevent web browser from optimizing\r\n\t\t// adding CSS classes and doing it simultaneously\r\n\t\t// rather than sequentially (required for CSS transition).\r\n\t\t30)\r\n\t}\r\n\r\n\thide = () =>\r\n\t{\r\n\t\tconst { fadeOutDuration } = this.props\r\n\r\n\t\tclearTimeout(this.showTimer)\r\n\r\n\t\tif (!this._isMounted) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.setState\r\n\t\t({\r\n\t\t\tshow : false,\r\n\t\t\tfadeIn : false,\r\n\t\t\tfadeOut : true\r\n\t\t})\r\n\r\n\t\t// Gives some time to CSS opacity transition to finish.\r\n\t\tthis.hideTimer = setTimeout(() =>\r\n\t\t{\r\n\t\t\tif (this._isMounted) {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tfadeOut : false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tfadeOutDuration)\r\n\t}\r\n\r\n\tgetFadeInStyle() {\r\n\t\tconst { fadeInDuration } = this.props\r\n\t\treturn {\r\n\t\t\topacity: 1,\r\n\t\t\ttransition: `opacity ${fadeInDuration}ms ease-out`\r\n\t\t}\r\n\t}\r\n\r\n\tgetFadeOutStyle() {\r\n\t\tconst { fadeOutDuration } = this.props\r\n\t\treturn {\r\n\t\t\topacity: 0,\r\n\t\t\ttransition: `opacity ${fadeOutDuration}ms ease-out`\r\n\t\t}\r\n\t}\r\n\r\n\tgetStyle() {\r\n\t\tconst {\r\n\t\t\tshow,\r\n\t\t\tfadeInInitially\r\n\t\t} = this.props\r\n\r\n\t\tconst {\r\n\t\t\tfadeIn,\r\n\t\t\tfadeOut\r\n\t\t} = this.state\r\n\r\n\t\tif (fadeIn) {\r\n\t\t\treturn this.getFadeInStyle()\r\n\t\t}\r\n\r\n\t\tif (fadeOut) {\r\n\t\t\treturn this.getFadeOutStyle()\r\n\t\t}\r\n\r\n\t\t// If `show={true}` and hasn't faded in/out yet, then just show.\r\n\t\tif (show && fadeIn === undefined && !fadeInInitially) {\r\n\t\t\treturn SHOWN_STYLE\r\n\t\t}\r\n\r\n\t\treturn HIDDEN_STYLE\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst {\r\n\t\t\tfadeInClassName,\r\n\t\t\tstyle,\r\n\t\t\tchildren\r\n\t\t} = this.props\r\n\r\n\t\tconst {\r\n\t\t\tshow,\r\n\t\t\tfadeIn,\r\n\t\t\tfadeOut\r\n\t\t} = this.state\r\n\r\n\t\tif (show || fadeOut) {\r\n\t\t\tif (fadeInClassName) {\r\n\t\t\t\treturn React.cloneElement(children, {\r\n\t\t\t\t\tclassName: classNames(children.props.className, {\r\n\t\t\t\t\t\t[fadeInClassName]: fadeIn\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\treturn React.cloneElement(children, {\r\n\t\t\t\t\tstyle: children.props.style ? { ...children.props.style, ...this.getStyle() } : this.getStyle()\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t// return children\r\n\t\t}\r\n\r\n\t\treturn null\r\n\t}\r\n}\r\n\r\nconst SHOWN_STYLE = {\r\n\topacity: 1\r\n}\r\n\r\nconst HIDDEN_STYLE = {\r\n\topacity: 0\r\n}"]}