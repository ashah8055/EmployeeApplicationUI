{"version":3,"sources":["../source/Button.js"],"names":["PureComponent","Component","Button","state","storeInstance","ref","button","focus","linkOnClick","event","props","wait","busy","disabled","action","onClick","shiftKey","altKey","ctrlKey","metaKey","preventDefault","buttonOnClick","result","then","setState","_isMounted","component","link","title","submit","stretch","style","className","children","rest","properties","LinkComponent","undefined","propTypes","func","bool","oneOfType","string","isRequired","object","defaultProps"],"mappings":"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","file":"Button.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\n\r\nimport ActivityIndicator from './ActivityIndicator'\r\nimport FadeInOut from './FadeInOut'\r\n\r\n// `PureComponent` is only available in React >= 15.3.0.\r\nconst PureComponent = React.PureComponent || React.Component\r\n\r\nexport default class Button extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// onClick handler.\r\n\t\t// Doesn't receive `event` by default.\r\n\t\t// Can be `async`/`await` or return a `Promise`\r\n\t\t// in which case it will show \"wait\" animation.\r\n\t\tonClick         : PropTypes.func,\r\n\r\n\t\t// onClick handler.\r\n\t\t// (deprecated, use `onClick(event)` instead)\r\n\t\taction          : PropTypes.func,\r\n\r\n\t\t// If `wait` is `true` then the button\r\n\t\t// will be disabled and a spinner will be shown.\r\n\t\twait            : PropTypes.bool,\r\n\r\n\t\t// (deprecated)\r\n\t\t// (use `wait` instead)\r\n\t\t// If `busy` is `true` then the button\r\n\t\t// will be disabled and a spinner will be shown.\r\n\t\tbusy            : PropTypes.bool,\r\n\r\n\t\t// Disables the button\r\n\t\tdisabled        : PropTypes.bool,\r\n\r\n\t\t// When `true`, the button will submit an enclosing form.\r\n\t\tsubmit          : PropTypes.bool,\r\n\r\n\t\t// If `link` is set, then the button is gonna be an <a/> tag.\r\n\t\tlink            : PropTypes.oneOfType([ PropTypes.string, PropTypes.bool ]),\r\n\r\n\t\t// Custom React component for the button.\r\n\t\tcomponent       : PropTypes.func,\r\n\r\n\t\t// HTML `title` attribute\r\n\t\ttitle           : PropTypes.string,\r\n\r\n\t\t// Set to `true` to stretch the button to full width\r\n\t\tstretch         : PropTypes.bool.isRequired,\r\n\r\n\t\t// CSS class name\r\n\t\tclassName       : PropTypes.string,\r\n\r\n\t\t// CSS style object for the button container\r\n\t\tstyle           : PropTypes.object\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\t// Set to `true` to stretch the button to full width\r\n\t\tstretch : false\r\n\t}\r\n\r\n\tstate = {}\r\n\r\n\tcomponentDidMount()\r\n\t{\r\n\t\tthis._isMounted = true\r\n\t}\r\n\r\n\tcomponentWillUnmount()\r\n\t{\r\n\t\tthis._isMounted = false\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tcomponent,\r\n\t\t\tlink,\r\n\t\t\ttitle,\r\n\t\t\twait,\r\n\t\t\tbusy,\r\n\t\t\tdisabled,\r\n\t\t\taction,\r\n\t\t\tonClick,\r\n\t\t\tsubmit,\r\n\t\t\tstretch,\r\n\t\t\tstyle,\r\n\t\t\tclassName,\r\n\t\t\tchildren,\r\n\t\t\t...rest\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tconst properties =\r\n\t\t{\r\n\t\t\t...rest,\r\n\t\t\tref : this.storeInstance,\r\n\t\t\ttitle,\r\n\t\t\tstyle,\r\n\t\t\tclassName : classNames('rrui__input', 'rrui__button-reset', 'rrui__button',\r\n\t\t\t{\r\n\t\t\t\t'rrui__button--busy'       : wait || busy || this.state.wait,\r\n\t\t\t\t'rrui__button--disabled'   : disabled,\r\n\t\t\t\t'rrui__button--stretch'    : stretch,\r\n\t\t\t\t'rrui__button-reset--link' : link\r\n\t\t\t},\r\n\t\t\tclassName)\r\n\t\t}\r\n\r\n\t\tif (link)\r\n\t\t{\r\n\t\t\tconst LinkComponent = component || 'a'\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<LinkComponent\r\n\t\t\t\t\thref={ component ? undefined : link }\r\n\t\t\t\t\tonClick={ this.linkOnClick }\r\n\t\t\t\t\t{ ...properties }>\r\n\r\n\t\t\t\t\t{ children }\r\n\t\t\t\t</LinkComponent>\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<button\r\n\t\t\t\ttype={ submit ? 'submit' : 'button' }\r\n\t\t\t\tdisabled={ wait || busy || this.state.wait || disabled }\r\n\t\t\t\tonClick={ this.buttonOnClick }\r\n\t\t\t\t{ ...properties }>\r\n\r\n\t\t\t\t<FadeInOut\r\n\t\t\t\t\tshow={ wait || busy || this.state.wait }\r\n\t\t\t\t\tfadeOutDuration={300}\r\n\t\t\t\t\tfadeInClassName=\"rrui__button__busy--after-show\">\r\n\t\t\t\t\t<div className=\"rrui__button__busy\"/>\r\n\t\t\t\t</FadeInOut>\r\n\r\n\t\t\t\t{ children }\r\n\t\t\t</button>\r\n\t\t)\r\n\t}\r\n\r\n\tstoreInstance = (ref) => this.button = ref\r\n\r\n\tfocus = () => this.button.focus()\r\n\r\n\tlinkOnClick = (event) =>\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\twait,\r\n\t\t\tbusy,\r\n\t\t\tdisabled,\r\n\t\t\taction,\r\n\t\t\tonClick\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// Only handle left mouse button clicks\r\n\t\t// ignoring those ones with a modifier key pressed.\r\n\t\tif (event.button !== 0\r\n\t\t\t|| event.shiftKey\r\n\t\t\t|| event.altKey\r\n\t\t\t|| event.ctrlKey\r\n\t\t\t|| event.metaKey)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (wait || busy || this.state.wait || disabled)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// Could be just a \"submit\" button without having any `action`.\r\n\t\t// Could also be just a `link` button.\r\n\t\t// Therefore \"preventing default\" only if `action` is set:\r\n\t\t// for example, if `link` is set and no `action`\r\n\t\t// then it should proceed with navigating to the `link`.\r\n\t\t// And if `link` is set and `action` is specified too\r\n\t\t// then it will prevent it from navigating to the `link`.\r\n\t\tif (action || onClick) {\r\n\t\t\tevent.preventDefault()\r\n\t\t}\r\n\r\n\t\tthis.buttonOnClick()\r\n\t}\r\n\r\n\tbuttonOnClick = (event) =>\r\n\t{\r\n\t\tconst { action, onClick } = this.props\r\n\r\n\t\tlet result\r\n\t\t// Could be just a `<button type=\"submit\"/>`\r\n\t\t// without any `action` supplied.\r\n\t\tif (action) {\r\n\t\t\tresult = action()\r\n\t\t} else if (onClick) {\r\n\t\t\tresult = onClick()\r\n\t\t}\r\n\r\n\t\tif (result && typeof result.then === 'function') {\r\n\t\t\tthis.setState({ wait: true })\r\n\t\t\tresult.then(\r\n\t\t\t\t() => this._isMounted && this.setState({ wait: false }),\r\n\t\t\t\t() => this._isMounted && this.setState({ wait: false })\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n}"]}