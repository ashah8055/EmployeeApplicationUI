{"version":3,"sources":["../source/Tooltip.js"],"names":["PureComponent","Component","Tooltip","state","show","animate","hide_timeout","clearTimeout","undefined","tooltip","classList","remove","create_tooltip","setState","isShown","calculate_coordinates","x","y","style","left","top","add","hide","hidingAnimationDuration","props","setTimeout","destroy_tooltip","on_mouse_enter","content","mobile","createPortal","show_timeout","delay","on_mouse_leave","on_touch_start","storeOriginNode","ref","origin","tooltipClassName","document","createElement","position","container","appendChild","parentNode","removeChild","width","offsetWidth","height","offsetHeight","origin_width","_offset","offset","reposition_within_screen","inline","className","children","inline_style","propTypes","node","bool","isRequired","number","func","object","string","defaultProps","body","minimal_margin","window","innerWidth","pageYOffset","innerHeight","element","rect","getBoundingClientRect","client_left","clientLeft","client_top","clientTop","pageXOffset","display"],"mappings":"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","file":"Tooltip.js","sourcesContent":["import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\n\r\n// `PureComponent` is only available in React >= 15.3.0.\r\nconst PureComponent = React.PureComponent || React.Component\r\n\r\n// https://github.com/Dogfalo/materialize/blob/master/js/tooltip.js\r\nexport default class Tooltip extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// Tooltip content.\r\n\t\tcontent : PropTypes.node,\r\n\r\n\t\t// Whether this element should be displayed as `inline-block`.\r\n\t\t// (is `true` by default)\r\n\t\tinline : PropTypes.bool.isRequired,\r\n\r\n\t\t// The delay before the tooltip is shown (in milliseconds)\r\n\t\tdelay : PropTypes.number.isRequired,\r\n\r\n\t\t// The duration of the tooltip hiding animation.\r\n\t\t// The DOM element will retain `display: block` for this time period.\r\n\t\t// When changing this timeout also change `transition` time for\r\n\t\t// `.tooltip--after-show` and `.tooltip--before-hide` CSS classes.\r\n\t\t// Is `120` by default.\r\n\t\thidingAnimationDuration : PropTypes.number.isRequired,\r\n\r\n\t\t// `container: () => DOMElement` property is optional\r\n\t\t// and is gonna be the parent DOM Element for the tooltip itself\r\n\t\t// (`document.body` by default).\r\n\t\t// (in which case make sure that `document.body` has no `margin`\r\n\t\t//  otherwise tooltip `left` and `top` positions will be slightly off).\r\n\t\tcontainer : PropTypes.func,\r\n\r\n\t\t// CSS style object\r\n\t\tstyle : PropTypes.object,\r\n\r\n\t\t// CSS class name\r\n\t\tclassName : PropTypes.string,\r\n\r\n\t\t// Tooltip CSS class name\r\n\t\ttooltipClassName : PropTypes.string\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\tinline : true,\r\n\t\tdelay : 200, // in milliseconds\r\n\t\thidingAnimationDuration : 120, // in milliseconds\r\n\t\tcontainer : () => document.body\r\n\t}\r\n\r\n\tstate = {}\r\n\r\n\t// componentDidMount()\r\n\t// {\r\n\t// \tthis.create_tooltip()\r\n\t// }\r\n\r\n\tcomponentWillUnmount()\r\n\t{\r\n\t\tclearTimeout(this.show_timeout)\r\n\t\tclearTimeout(this.hide_timeout)\r\n\r\n\t\tthis.destroy_tooltip()\r\n\t}\r\n\r\n\tcreate_tooltip()\r\n\t{\r\n\t\tconst { tooltipClassName } = this.props\r\n\r\n\t\tthis.tooltip = document.createElement('div')\r\n\r\n\t\tthis.tooltip.style.position = 'absolute'\r\n\t\tthis.tooltip.style.left = 0\r\n\t\tthis.tooltip.style.top  = 0\r\n\r\n\t\tthis.tooltip.classList.add('rrui__tooltip')\r\n\r\n\t\tif (tooltipClassName)\r\n\t\t{\r\n\t\t\tthis.tooltip.classList.add(tooltipClassName)\r\n\t\t}\r\n\r\n\t\tthis.container().appendChild(this.tooltip)\r\n\t}\r\n\r\n\tdestroy_tooltip()\r\n\t{\r\n\t\tif (this.tooltip)\r\n\t\t{\r\n\t\t\t// Won't throw an exception\r\n\t\t\tthis.tooltip.parentNode.removeChild(this.tooltip)\r\n\t\t\tthis.tooltip = undefined\r\n\t\t}\r\n\t}\r\n\r\n\tcontainer()\r\n\t{\r\n\t\tconst { container } = this.props\r\n\t\treturn container()\r\n\t}\r\n\r\n\tcalculate_coordinates()\r\n\t{\r\n\t\tconst width  = this.tooltip.offsetWidth\r\n\t\tconst height = this.tooltip.offsetHeight\r\n\r\n\t\tconst origin = this.origin\r\n\r\n\t\tconst origin_width  = origin.offsetWidth\r\n\r\n\t\tconst _offset = offset(origin)\r\n\r\n\t\tconst top  = _offset.top - height - offset(this.container()).top\r\n\t\tconst left = _offset.left + origin_width / 2 - width / 2\r\n\r\n\t\treturn reposition_within_screen(left, top, width, height)\r\n\t}\r\n\r\n\tshow = () =>\r\n\t{\r\n\t\t// Play tooltip showing animation\r\n\t\tlet animate = false\r\n\r\n\t\t// If hiding animation is being played,\r\n\t\t// then cancel it, and cancel setting\r\n\t\t// `display` to `none` after it finishes playing.\r\n\t\tif (this.hide_timeout)\r\n\t\t{\r\n\t\t\tclearTimeout(this.hide_timeout)\r\n\t\t\tthis.hide_timeout = undefined\r\n\r\n\t\t\t// Abort tooltip hiding animation.\r\n\t\t\t// It will automatically return to the \"showing\" state.\r\n\t\t\tthis.tooltip.classList.remove('rrui__tooltip--before-hide')\r\n\t\t}\r\n\t\t// Otherwise, the tooltip is hidden (or never been shown)\r\n\t\telse\r\n\t\t{\r\n\t\t\t// Not creating in `componentDidMount()`\r\n\t\t\t// therefore create it here.\r\n\t\t\tif (!this.tooltip)\r\n\t\t\t{\r\n\t\t\t\tthis.create_tooltip()\r\n\t\t\t}\r\n\r\n\t\t\t// Play tooltip showing animation\r\n\t\t\tanimate = true\r\n\t\t}\r\n\r\n\t\t// Now that `this.tooltip` has been created,\r\n\t\t// re-render the component so that `ReactDOM.createPortal()` is called.\r\n\t\tthis.setState({ isShown: true }, () =>\r\n\t\t{\r\n\t\t\tconst { x, y } = this.calculate_coordinates()\r\n\r\n\t\t\tthis.tooltip.style.left = `${x}px`\r\n\t\t\tthis.tooltip.style.top  = `${y}px`\r\n\r\n\t\t\t// Play tooltip showing animation\r\n\t\t\t// (doing it after setting position because\r\n\t\t\t//  setting position applies `display: block`)\r\n\t\t\tif (animate)\r\n\t\t\t{\r\n\t\t\t\tthis.tooltip.classList.add('rrui__tooltip--after-show')\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\thide = () =>\r\n\t{\r\n\t\tconst { hidingAnimationDuration } = this.props\r\n\r\n\t\t// If already hiding, or if already hidden, then do nothing.\r\n\t\t// if (this.hide_timeout || this.tooltip.style.display === 'none')\r\n\t\tif (this.hide_timeout || !this.tooltip)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// Play tooltip hiding animation\r\n\t\tthis.tooltip.classList.add('rrui__tooltip--before-hide')\r\n\r\n\t\t// Set the tooltip to `display: none`\r\n\t\t// after its hiding animation finishes.\r\n\t\tthis.hide_timeout = setTimeout(() =>\r\n\t\t{\r\n\t\t\tthis.hide_timeout = undefined\r\n\t\t\tthis.destroy_tooltip()\r\n\t\t\tthis.setState({ isShown: false })\r\n\t\t},\r\n\t\thidingAnimationDuration)\r\n\t}\r\n\r\n\ton_mouse_enter = () =>\r\n\t{\r\n\t\tconst { content } = this.props\r\n\r\n\t\t// mouse enter and mouse leave events\r\n\t\t// are triggered on mobile devices too\r\n\t\tif (this.mobile)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// If the tooltip has no content\r\n\t\t// (e.g. `react-time-ago` first render)\r\n\t\t// or if React Portal API is not available\r\n\t\t// then don't show the tooltip.\r\n\t\tif (!content || !ReactDOM.createPortal)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// Shouldn't happen, because\r\n\t\t// `mouse leave` event clears this timeout.\r\n\t\tif (this.show_timeout)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst { delay } = this.props\r\n\r\n\t\t// Don't show the tooltip immediately\r\n\t\t// but rather wait for the user to\r\n\t\t// \"mouse over\" it for a short time interval.\r\n\t\t// (prevents false positives)\r\n\t\tthis.show_timeout = setTimeout(() =>\r\n\t\t{\r\n\t\t\tthis.show_timeout = undefined\r\n\t\t\tthis.show()\r\n\t\t},\r\n\t\tdelay)\r\n\t}\r\n\r\n\ton_mouse_leave = () =>\r\n\t{\r\n\t\t// mouse enter and mouse leave events\r\n\t\t// are triggered on mobile devices too\r\n\t\tif (this.mobile)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// If tooltip hasn't been shown yet,\r\n\t\t// then cancel showing it.\r\n\t\tif (this.show_timeout)\r\n\t\t{\r\n\t\t\tclearTimeout(this.show_timeout)\r\n\t\t\tthis.show_timeout = undefined\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\t// Otherwise, the tooltip is shown, so hide it.\r\n\t\tthis.hide()\r\n\t}\r\n\r\n\ton_touch_start = () =>\r\n\t{\r\n\t\tconst { content } = this.props\r\n\r\n\t\t// mouse enter events won't be processed from now on\r\n\t\tthis.mobile = true\r\n\r\n\t\t// If the tooltip has no content\r\n\t\t// (e.g. `react-time-ago` first render)\r\n\t\t// or if React Portal API is not available\r\n\t\t// then don't show the tooltip.\r\n\t\tif (!content || !ReactDOM.createPortal)\r\n\t\t{\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tthis.show()\r\n\t}\r\n\r\n\tstoreOriginNode = (ref) => this.origin = ref\r\n\r\n\trender()\r\n\t{\r\n\t\t// Shows tooltip on mouse over when on desktop.\r\n\t\t// Shows tooltip on touch when on mobile.\r\n\r\n\t\tconst\r\n\t\t{\r\n\t\t\tcontent,\r\n\t\t\tinline,\r\n\t\t\tstyle,\r\n\t\t\tclassName,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\t// `ReactDOM.createPortal()` requires React >= 16.\r\n\t\t// If it's not available then it won't show the tooltip.\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={ this.storeOriginNode }\r\n\t\t\t\tonMouseEnter={ this.on_mouse_enter }\r\n\t\t\t\tonMouseLeave={ this.on_mouse_leave }\r\n\t\t\t\tonTouchStart={ this.on_touch_start }\r\n\t\t\t\tonTouchMove={ this.hide }\r\n\t\t\t\tonTouchEnd={ this.hide }\r\n\t\t\t\tonTouchCancel={ this.hide }\r\n\t\t\t\tstyle={ inline ? (style ? { ...inline_style, ...style } : inline_style) : style }\r\n\t\t\t\tclassName={ classNames('rrui__tooltip__target', className) }>\r\n\t\t\t\t{ children }\r\n\t\t\t\t{ this.tooltip && content && ReactDOM.createPortal && ReactDOM.createPortal(content, this.tooltip) }\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nfunction reposition_within_screen(x, y, width, height)\r\n{\r\n\tconst minimal_margin = 4 // in pixels\r\n\r\n\tif (x < minimal_margin)\r\n\t{\r\n\t\tx = minimal_margin\r\n\t}\r\n\telse if (x + width + minimal_margin > window.innerWidth)\r\n\t{\r\n\t\tx -= (x + width + minimal_margin) - window.innerWidth\r\n\t}\r\n\r\n\tif (y < window.pageYOffset + minimal_margin)\r\n\t{\r\n\t\ty = window.pageYOffset + minimal_margin\r\n\t}\r\n\telse if (y + height + minimal_margin > window.pageYOffset + window.innerHeight)\r\n\t{\r\n\t\ty -= (y + height + minimal_margin) - (window.pageYOffset + window.innerHeight)\r\n\t}\r\n\r\n\treturn { x, y }\r\n}\r\n\r\n// http://stackoverflow.com/questions/5598743/finding-elements-position-relative-to-the-document\r\nfunction offset(element)\r\n{\r\n\tconst rect = element.getBoundingClientRect()\r\n\r\n\tconst client_left = document.clientLeft || document.body.clientLeft || 0\r\n\tconst client_top  = document.clientTop || document.body.clientTop || 0\r\n\r\n\tconst top  = rect.top + window.pageYOffset - client_top\r\n\tconst left = rect.left + window.pageXOffset - client_left\r\n\r\n\treturn { top, left }\r\n}\r\n\r\nconst inline_style =\r\n{\r\n\tdisplay : 'inline-block'\r\n}"]}