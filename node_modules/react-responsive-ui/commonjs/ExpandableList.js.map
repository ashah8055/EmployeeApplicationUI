{"version":3,"sources":["../source/ExpandableList.js"],"names":["PureComponent","Component","ExpandableList","state","toggle","expandable","expand","parameters","collapse","isExpanded","preload","onBlur","event","getFocusedItemIndex","list","undefined","focusItem","index","onKeyDown","onEnter","props","keyCode","preventDefault","storeExpandableRef","ref","storeListRef","onChange","value","focusSelectedItem","setState","selectedItemIndex","collapsedDueToItemBeingSelected","onCollapse","unfocus","onExpand","focusOnExpand","children","focus","calculateHeight","alignment","upward","scrollIntoView","onPreloadStateChange","getTogglerNode","onFocusOut","onTapOutside","highlightSelectedItem","closeLabel","closeButtonIcon","className","rest","selectedItemValue","propTypes","scrollMaxItems","number","scrollBarPadding","bool","func","isRequired","string","defaultProps"],"mappings":"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","file":"ExpandableList.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\nimport { polyfill as reactLifecyclesCompat } from 'react-lifecycles-compat'\r\n\r\nimport ScrollableList from './ScrollableList'\r\nimport Expandable from './Expandable'\r\nimport { findItemIndexByValue } from './List'\r\n\r\n// `PureComponent` is only available in React >= 15.3.0.\r\nconst PureComponent = React.PureComponent || React.Component\r\n\r\n@reactLifecyclesCompat\r\nexport default class ExpandableList extends PureComponent\r\n{\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// Maximum items fitting the list height (scrollable).\r\n\t\tscrollMaxItems : PropTypes.number,\r\n\r\n\t\t// Whether should add `margin-right` for scrollbar width on overflow.\r\n\t\tscrollBarPadding : PropTypes.bool,\r\n\r\n\t\t// Preloads the contents of the expandable list\r\n\t\t// before it's expanded. Must return a `Promise`.\r\n\t\tpreload : PropTypes.func,\r\n\r\n\t\t// Whether the list items should be focused upon expand.\r\n\t\tfocusOnExpand : PropTypes.bool.isRequired,\r\n\t\tfocusSelectedItem : PropTypes.bool.isRequired,\r\n\r\n\t\tclassName : PropTypes.string\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\talignment : 'left',\r\n\t\tfocusOnExpand : true,\r\n\t\tfocusSelectedItem : true\r\n\t}\r\n\r\n\tstatic getDerivedStateFromProps(props, state)\r\n\t{\r\n\t\tif (state.selectedItemValue !== props.value)\r\n\t\t{\r\n\t\t\treturn {\r\n\t\t\t\tselectedItemValue : props.value,\r\n\t\t\t\tselectedItemIndex : props.value === undefined ? undefined : findItemIndexByValue(props.value, props.children)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn null\r\n\t}\r\n\r\n\tstate = {}\r\n\r\n\ttoggle     = () => this.expandable.toggle()\r\n\texpand     = (parameters) => this.expandable.expand(parameters)\r\n\tcollapse   = () => this.expandable.collapse()\r\n\tisExpanded = () => this.expandable.isExpanded()\r\n\tpreload    = () => this.expandable.preload()\r\n\tonBlur     = (event) => this.expandable.onBlur(event)\r\n\r\n\tgetFocusedItemIndex = () => this.list ? this.list.getFocusedItemIndex() : undefined\r\n\tfocusItem = (index) => this.list.focusItem(index)\r\n\r\n\tonKeyDown = (event) =>\r\n\t{\r\n\t\tconst { onEnter } = this.props\r\n\r\n\t\tswitch (event.keyCode)\r\n\t\t{\r\n\t\t\t// \"Escape\".\r\n\t\t\t// Collapse.\r\n\t\t\tcase 27:\r\n\t\t\t\tevent.preventDefault()\r\n\t\t\t\t// Collapse the list if it's expanded.\r\n\t\t\t\treturn this.expandable.collapse()\r\n\r\n\t\t\t// \"Up\" arrow.\r\n\t\t\t// Select the previous item (if present).\r\n\t\t\tcase 38:\r\n\t\t\t// \"Down\" arrow.\r\n\t\t\t// Select the next item (if present).\r\n\t\t\tcase 40:\r\n\t\t\t\tif (this.isExpanded())\r\n\t\t\t\t{\r\n\t\t\t\t\t// Navigate the list (if it was already expanded).\r\n\t\t\t\t\tthis.list.onKeyDown(event)\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t// Expand the list if it's collapsed.\r\n\t\t\t\t\tevent.preventDefault()\r\n\t\t\t\t\tthis.expandable.expand()\r\n\t\t\t\t}\r\n\t\t\t\treturn\r\n\r\n\t\t\t// \"Enter\".\r\n\t\t\tcase 13:\r\n\t\t\t\t// Select the currently focused item.\r\n\t\t\t\treturn this.list && this.list.onKeyDown(event)\r\n\t\t}\r\n\t}\r\n\r\n\tstoreExpandableRef = (ref) => this.expandable = ref\r\n\tstoreListRef = (ref) => this.list = ref\r\n\r\n\tonChange = (value, index) =>\r\n\t{\r\n\t\tconst { onChange, focusSelectedItem } = this.props\r\n\r\n\t\tif (onChange) {\r\n\t\t\tonChange(value, index)\r\n\t\t}\r\n\r\n\t\tif (focusSelectedItem)\r\n\t\t{\r\n\t\t\tthis.setState({\r\n\t\t\t\tselectedItemIndex : index\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tthis.collapsedDueToItemBeingSelected = true\r\n\t\tthis.collapse()\r\n\t\tthis.collapsedDueToItemBeingSelected = undefined\r\n\t}\r\n\r\n\tonCollapse = (parameters) =>\r\n\t{\r\n\t\tconst { onCollapse } = this.props\r\n\r\n\t\tif (onCollapse)\r\n\t\t{\r\n\t\t\tonCollapse\r\n\t\t\t({\r\n\t\t\t\t...parameters,\r\n\t\t\t\tcollapsedDueToItemBeingSelected : this.collapsedDueToItemBeingSelected\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tthis.list && this.list.unfocus()\r\n\t}\r\n\r\n\tonExpand = () =>\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tfocusOnExpand,\r\n\t\t\tonExpand,\r\n\t\t\tchildren\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\tconst { selectedItemIndex } = this.state\r\n\r\n\t\tif (onExpand) {\r\n\t\t\tonExpand()\r\n\t\t}\r\n\r\n\t\tif (focusOnExpand)\r\n\t\t{\r\n\t\t\tif (selectedItemIndex === undefined) {\r\n\t\t\t\tthis.list.focus()\r\n\t\t\t} else {\r\n\t\t\t\tthis.list.focusItem(selectedItemIndex)\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Re-calculate `<ScrollableList/>` height.\r\n\t\tthis.list.calculateHeight()\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\talignment,\r\n\t\t\tupward,\r\n\t\t\tscrollIntoView,\r\n\t\t\tpreload,\r\n\t\t\tonPreloadStateChange,\r\n\t\t\tgetTogglerNode,\r\n\t\t\tonFocusOut,\r\n\t\t\tonTapOutside,\r\n\t\t\tonChange,\r\n\t\t\thighlightSelectedItem,\r\n\t\t\tcloseLabel,\r\n\t\t\tcloseButtonIcon,\r\n\t\t\tclassName,\r\n\t\t\tchildren,\r\n\t\t\t...rest\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\treturn (\r\n\t\t\t<Expandable\r\n\t\t\t\tref={ this.storeExpandableRef }\r\n\t\t\t\talignment={ alignment }\r\n\t\t\t\tupward={ upward }\r\n\t\t\t\tscrollIntoView={ scrollIntoView }\r\n\t\t\t\tpreload={ preload }\r\n\t\t\t\tonPreloadStateChange={ onPreloadStateChange }\r\n\t\t\t\tonExpand={ this.onExpand }\r\n\t\t\t\tonCollapse={ this.onCollapse }\r\n\t\t\t\tgetTogglerNode={ getTogglerNode }\r\n\t\t\t\tonFocusOut={ onFocusOut }\r\n\t\t\t\tonTapOutside={ onTapOutside }\r\n\t\t\t\tcloseLabel={ closeLabel }\r\n\t\t\t\tcloseButtonIcon={ closeButtonIcon }\r\n\t\t\t\tclassName={ classNames(className, 'rrui__expandable-list',\r\n\t\t\t\t{\r\n\t\t\t\t\t'rrui__expandable-list--left-aligned'  : alignment === 'left',\r\n\t\t\t\t\t'rrui__expandable-list--right-aligned' : alignment === 'right'\r\n\t\t\t\t}) }>\r\n\r\n\t\t\t\t<ScrollableList\r\n\t\t\t\t\t{...rest}\r\n\t\t\t\t\tref={ this.storeListRef }\r\n\t\t\t\t\tonChange={ this.onChange }\r\n\t\t\t\t\thighlightSelectedItem={ onChange === undefined && highlightSelectedItem === undefined ? false : highlightSelectedItem }>\r\n\t\t\t\t\t{ children }\r\n\t\t\t\t</ScrollableList>\r\n\t\t\t</Expandable>\r\n\t\t)\r\n\t}\r\n}"]}