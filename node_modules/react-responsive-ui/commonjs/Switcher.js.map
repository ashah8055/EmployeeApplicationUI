{"version":3,"sources":["../source/Switcher.js"],"names":["PureComponent","Component","Switcher","state","focus","button_0","storeContainerComponent","container","_","onKeyDown","event","props","defaultPrevented","input","ctrlKey","altKey","shiftKey","metaKey","onChange","options","keyCode","preventDefault","previous_option_index","previous_focused_option_index","undefined","next_option_index","next_focused_option_index","disabled","indicateInvalid","error","style","className","map","option","index","render_button","value","selected","first","last","length","ref","chooser","label","i","document","activeElement","getFocusedOptionIndex","propTypes","arrayOf","shape","string","isRequired","name","bool","any","func","object","defaultProps"],"mappings":";;;;;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AAEA;;;;;;;;;;AAEA;AACA,IAAMA,gBAAgB,gBAAMA,aAAN,IAAuB,gBAAMC,SAAnD;;IAEqBC,Q;;;;;;;;;;;;;;wLAEpBC,K,GAAQ,E,QAmKRC,K,GAAQ;AAAA,UAAM,MAAKC,QAAL,CAAcD,KAAd,EAAN;AAAA,G,QAERE,uB,GAA0B;AAAA,UAAK,MAAKC,SAAL,GAAiBC,CAAtB;AAAA,G,QAE1BC,S,GAAY,UAACC,KAAD,EACZ;AAAA,OACSD,SADT,GACuB,MAAKE,KAD5B,CACSF,SADT;;;AAGC,OAAIA,SAAJ,EAAe;AACdA,cAAUC,KAAV;AACA;;AAED,OAAIA,MAAME,gBAAV,EAA4B;AAC3B;AACA;;AAED,OAAI,gCAAsBF,KAAtB,EAA6B,MAAKG,KAAlC,CAAJ,EAA8C;AAC7C;AACA;;AAED,OAAIH,MAAMI,OAAN,IAAiBJ,MAAMK,MAAvB,IAAiCL,MAAMM,QAAvC,IAAmDN,MAAMO,OAA7D,EAAsE;AACrE;AACA;;AAjBF,qBAmB+B,MAAKN,KAnBpC;AAAA,OAmBSO,QAnBT,eAmBSA,QAnBT;AAAA,OAmBmBC,OAnBnB,eAmBmBA,OAnBnB;;;AAqBC,WAAQT,MAAMU,OAAd;AAEC;AACA,SAAK,EAAL;AACCV,WAAMW,cAAN;;AAEA,SAAMC,wBAAwB,MAAKC,6BAAL,EAA9B;;AAEA,SAAID,0BAA0BE,SAA9B,EACA;AACC;AACA;AACA;AACA;AACA,wBAAeF,qBAAf,EAAwClB,KAAxC;;AAEA;AACA;AACA;;AAED;;AAED;AACA,SAAK,EAAL;AACCM,WAAMW,cAAN;;AAEA,SAAMI,oBAAoB,MAAKC,yBAAL,EAA1B;;AAEA,SAAID,sBAAsBD,SAA1B,EACA;AACC;AACA;AACA;AACA;AACA,wBAAeC,iBAAf,EAAoCrB,KAApC;;AAEA;AACA;AACA;;AAED;AAxCF;AA0CA,G;;;;;2BA5LD;AAAA;;AAAA,gBAUG,KAAKO,KAVR;AAAA,OAGEgB,QAHF,UAGEA,QAHF;AAAA,OAIER,OAJF,UAIEA,OAJF;AAAA,OAKES,eALF,UAKEA,eALF;AAAA,OAMEC,KANF,UAMEA,KANF;AAAA,OAOEC,KAPF,UAOEA,KAPF;AAAA,OAQEC,SARF,UAQEA,SARF;;;AAYC,UACC;AAAA;AAAA;AACC,UAAM,KAAKzB,uBADZ;AAEC,gBAAY,KAAKG,SAFlB;AAGC,gBAAY,0BAAW,gBAAX,EACZ;AACC,kCAA6BkB;AAD9B,MADY,EAIZI,SAJY,CAHb;AAQC,YAAQD,KART;AAUC;AAAA;AAAA,OAAK,WAAU,aAAf;AACGX,aAAQa,GAAR,CAAY,UAACC,MAAD,EAASC,KAAT;AAAA,aAAmB,OAAKC,aAAL,CAAmBF,MAAnB,EAA2BC,KAA3B,CAAnB;AAAA,MAAZ;AADH,KAVD;AAcGN,uBAAmBC,KAAnB,IACD;AAAA;AAAA,OAAK,WAAU,mBAAf;AACGA;AADH;AAfF,IADD;AAsBA;;;gCAEaI,M,EAAQC,K,EACtB;AAAA;;AAAA,iBACsC,KAAKvB,KAD3C;AAAA,OACSQ,OADT,WACSA,OADT;AAAA,OACkBiB,KADlB,WACkBA,KADlB;AAAA,OACyBT,QADzB,WACyBA,QADzB;;;AAGC,OAAMU,WAAWD,UAAUH,OAAOG,KAAlC;;AAEA,OAAME,QAAQJ,UAAU,CAAxB;AACA,OAAMK,OAAQL,UAAUf,QAAQqB,MAAR,GAAiB,CAAzC;;AAEA,UACC;AAAA;AAAA;AACC,UAAMP,OAAOG,KADd;AAEC,UAAM;AAAA,aAAO,mBAAeF,KAAf,IAA0BO,KAAjC;AAAA,MAFP;AAGC,WAAK,QAHN;AAIC,eAAWP,UAAU,CAAV,GAAcV,SAAd,GAA0B,IAJtC;AAKC,eAAWG,QALZ;AAMC,cAAU,KAAKe,OAAL,CAAaT,OAAOG,KAApB,CANX;AAOC,gBAAY,0BAEX,oBAFW,EAGX,wBAHW,EAIX;AACC,0CAAqCC,QADtC;AAEC;AACA,0CAAqCV,QAHtC;AAIC;AACA,uCAAqCW,KALtC;AAMC,sCAAqCC,IANtC;AAOC,wCAAqC,CAACD,KAAD,IAAU,CAACC;AAPjD,MAJW,CAPb;AAqBGN,WAAOU;AArBV,IADD;AAyBA;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;0BAEQP,K,EACR;AAAA;;AACC,UAAO,UAAC1B,KAAD,EACP;AAAA,kBACgC,OAAKC,KADrC;AAAA,QACSgB,QADT,WACSA,QADT;AAAA,QACmBT,QADnB,WACmBA,QADnB;;;AAGC,QAAIS,QAAJ,EAAc;AACb;AACA;;AAED;AACA,QAAIS,UAAU,OAAKzB,KAAL,CAAWyB,KAAzB,EAAgC;AAC/BlB,cAASkB,KAAT;AACA;AACD,IAZD;AAaA;;;0CAyED;AAAA,iBAC4B,KAAKzB,KADjC;AAAA,OACSQ,OADT,WACSA,OADT;AAAA,OACkBiB,KADlB,WACkBA,KADlB;;;AAGC,OAAIQ,IAAI,CAAR;AACA,UAAOA,IAAIzB,QAAQqB,MAAnB,EACA;AACC,QAAIK,SAASC,aAAT,KAA2B,iBAAeF,CAAf,CAA/B,EAAoD;AACnD,YAAOA,CAAP;AACA;AACDA;AACA;AACD;;AAED;;;;kDAEA;AACC,OAAMA,IAAI,KAAKG,qBAAL,EAAV;AACA,UAAOH,MAAM,CAAN,GAAUA,CAAV,GAAcA,IAAI,CAAzB;AACA;;AAED;;;;8CAEA;AAAA,OACSzB,OADT,GACqB,KAAKR,KAD1B,CACSQ,OADT;;AAEC,OAAMyB,IAAI,KAAKG,qBAAL,EAAV;AACA,UAAOH,MAAMzB,QAAQqB,MAAR,GAAiB,CAAvB,GAA2BI,CAA3B,GAA+BA,IAAI,CAA1C;AACA;;;;EAtQoC5C,a,UAI9BgD,S,GACP;AACC;AACA7B,UAAU,oBAAU8B,OAAV,CAET,oBAAUC,KAAV,CACC;AACA;AACAd,SAAO,oBAAUe,MAAV,CAAiBC,UAFxB;AAGA;AACAT,SAAO,oBAAUQ,MAAV,CAAiBC;AAJxB,EADD,CAFS,EAUTA,UAZF;;AAcC;AACAC,OAAe,oBAAUF,MAf1B;;AAiBC;AACAxB,WAAe,oBAAU2B,IAlB1B;;AAoBC;AACAlB,QAAe,oBAAUmB,GArB1B;;AAuBC;AACArC,WAAe,oBAAUsC,IAAV,CAAeJ,UAxB/B;;AA0BC;AACArB,YAAe,oBAAUoB,MA3B1B;;AA6BC;AACArB,QAAe,oBAAU2B;AA9B1B,C,SAiCOC,Y,GACP;AACC;AACA9B,kBAAkB;AAFnB,C;kBAvCoB1B,Q","file":"Switcher.js","sourcesContent":["import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\n\r\nimport { submitFormOnCtrlEnter } from './utility/dom'\r\n\r\n// `PureComponent` is only available in React >= 15.3.0.\r\nconst PureComponent = React.PureComponent || React.Component\r\n\r\nexport default class Switcher extends PureComponent\r\n{\r\n\tstate = {}\r\n\r\n\tstatic propTypes =\r\n\t{\r\n\t\t// A list of selectable options\r\n\t\toptions : PropTypes.arrayOf\r\n\t\t(\r\n\t\t\tPropTypes.shape\r\n\t\t\t({\r\n\t\t\t\t// Option value\r\n\t\t\t\tvalue: PropTypes.string.isRequired,\r\n\t\t\t\t// Option label\r\n\t\t\t\tlabel: PropTypes.string.isRequired\r\n\t\t\t})\r\n\t\t)\r\n\t\t.isRequired,\r\n\r\n\t\t// HTML form input `name` attribute\r\n\t\tname         : PropTypes.string,\r\n\r\n\t\t// If `true` then will be disabled\r\n\t\tdisabled     : PropTypes.bool,\r\n\r\n\t\t// The selected option value\r\n\t\tvalue        : PropTypes.any,\r\n\r\n\t\t// Is called when an option is selected\r\n\t\tonChange     : PropTypes.func.isRequired,\r\n\r\n\t\t// CSS class\r\n\t\tclassName    : PropTypes.string,\r\n\r\n\t\t// CSS style object\r\n\t\tstyle        : PropTypes.object\r\n\t}\r\n\r\n\tstatic defaultProps =\r\n\t{\r\n\t\t// Show `error` (if passed).\r\n\t\tindicateInvalid : true\r\n\t}\r\n\r\n\trender()\r\n\t{\r\n\t\tconst\r\n\t\t{\r\n\t\t\tdisabled,\r\n\t\t\toptions,\r\n\t\t\tindicateInvalid,\r\n\t\t\terror,\r\n\t\t\tstyle,\r\n\t\t\tclassName\r\n\t\t}\r\n\t\t= this.props\r\n\r\n\t\treturn (\r\n\t\t\t<div\r\n\t\t\t\tref={ this.storeContainerComponent }\r\n\t\t\t\tonKeyDown={ this.onKeyDown }\r\n\t\t\t\tclassName={ classNames('rrui__switcher',\r\n\t\t\t\t{\r\n\t\t\t\t\t'rrui__switcher--disabled' : disabled\r\n\t\t\t\t},\r\n\t\t\t\tclassName) }\r\n\t\t\t\tstyle={ style }>\r\n\r\n\t\t\t\t<div className=\"rrui__input\">\r\n\t\t\t\t\t{ options.map((option, index) => this.render_button(option, index)) }\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{ indicateInvalid && error &&\r\n\t\t\t\t\t<div className=\"rrui__input-error\">\r\n\t\t\t\t\t\t{ error }\r\n\t\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\trender_button(option, index)\r\n\t{\r\n\t\tconst { options, value, disabled } = this.props\r\n\r\n\t\tconst selected = value === option.value\r\n\r\n\t\tconst first = index === 0\r\n\t\tconst last  = index === options.length - 1\r\n\r\n\t\treturn (\r\n\t\t\t<button\r\n\t\t\t\tkey={ option.value }\r\n\t\t\t\tref={ ref => this[`button_${index}`] = ref }\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\ttabIndex={ index === 0 ? undefined : '-1' }\r\n\t\t\t\tdisabled={ disabled }\r\n\t\t\t\tonClick={ this.chooser(option.value) }\r\n\t\t\t\tclassName={ classNames\r\n\t\t\t\t(\r\n\t\t\t\t\t'rrui__button-reset',\r\n\t\t\t\t\t'rrui__switcher__option',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t'rrui__switcher__option--selected' : selected,\r\n\t\t\t\t\t\t// CSS selector performance optimization\r\n\t\t\t\t\t\t'rrui__switcher__option--disabled' : disabled,\r\n\t\t\t\t\t\t// Ordering\r\n\t\t\t\t\t\t'rrui__switcher__option--first'    : first,\r\n\t\t\t\t\t\t'rrui__switcher__option--last'     : last,\r\n\t\t\t\t\t\t'rrui__switcher__option--middle'   : !first && !last\r\n\t\t\t\t\t}\r\n\t\t\t\t) }>\r\n\t\t\t\t{ option.label }\r\n\t\t\t</button>\r\n\t\t)\r\n\t}\r\n\r\n\t// render_static()\r\n\t// {\r\n\t// \tconst { options } = this.props\r\n\t// \treturn options.map((option, index) => this.render_static_option(option, index))\r\n\t// }\r\n\r\n\t// render_static_option(option, index)\r\n\t// {\r\n\t// \tconst { options, name, value } = this.props\r\n\t//\r\n\t// \tconst first = index === 0\r\n\t// \tconst last  = index === options.length - 1\r\n\t//\r\n\t// \treturn (\r\n\t// \t\t<span\r\n\t// \t\t\tkey={ option.value }\r\n\t// \t\t\tclassName={ classNames('rrui__button-reset', 'rrui__switcher__option',\r\n\t// \t\t\t{\r\n\t// \t\t\t\t'rrui__switcher__option--first'  : first,\r\n\t// \t\t\t\t'rrui__switcher__option--last'   : last,\r\n\t// \t\t\t\t'rrui__switcher__option--middle' : !first && !last\r\n\t// \t\t\t}) }>\r\n\t// \t\t\t<input\r\n\t// \t\t\t\ttype=\"radio\"\r\n\t// \t\t\t\tname={ name }\r\n\t// \t\t\t\tchecked={ value === option.value }/>\r\n\t// \t\t\t{ option.label }\r\n\t// \t\t</span>\r\n\t// \t)\r\n\t// }\r\n\r\n\tchooser(value)\r\n\t{\r\n\t\treturn (event) =>\r\n\t\t{\r\n\t\t\tconst { disabled, onChange } = this.props\r\n\r\n\t\t\tif (disabled) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\t// Call `onChange` only if `value` did actually change\r\n\t\t\tif (value !== this.props.value) {\r\n\t\t\t\tonChange(value)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfocus = () => this.button_0.focus()\r\n\r\n\tstoreContainerComponent = _ => this.container = _\r\n\r\n\tonKeyDown = (event) =>\r\n\t{\r\n\t\tconst { onKeyDown } = this.props\r\n\r\n\t\tif (onKeyDown) {\r\n\t\t\tonKeyDown(event)\r\n\t\t}\r\n\r\n\t\tif (event.defaultPrevented) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (submitFormOnCtrlEnter(event, this.input)) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tif (event.ctrlKey || event.altKey || event.shiftKey || event.metaKey) {\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst { onChange, options } = this.props\r\n\r\n\t\tswitch (event.keyCode)\r\n\t\t{\r\n\t\t\t// Focus the previous option (if present) on left arrow.\r\n\t\t\tcase 37:\r\n\t\t\t\tevent.preventDefault()\r\n\r\n\t\t\t\tconst previous_option_index = this.previous_focused_option_index()\r\n\r\n\t\t\t\tif (previous_option_index !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\t// Focus the option <button/> so that\r\n\t\t\t\t\t// a subsequent \"Spacebar\" keyDown\r\n\t\t\t\t\t// doesn't select the previously selected\r\n\t\t\t\t\t// option (e.g. the first one)\r\n\t\t\t\t\tthis[`button_${previous_option_index}`].focus()\r\n\r\n\t\t\t\t\t// // Change the `value`\r\n\t\t\t\t\t// return onChange(options[previous_option_index].value)\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\r\n\r\n\t\t\t// Focus the next option (if present) on right arrow.\r\n\t\t\tcase 39:\r\n\t\t\t\tevent.preventDefault()\r\n\r\n\t\t\t\tconst next_option_index = this.next_focused_option_index()\r\n\r\n\t\t\t\tif (next_option_index !== undefined)\r\n\t\t\t\t{\r\n\t\t\t\t\t// Focus the option <button/> so that\r\n\t\t\t\t\t// a subsequent \"Spacebar\" keyDown\r\n\t\t\t\t\t// doesn't select the previously selected\r\n\t\t\t\t\t// option (e.g. the first one)\r\n\t\t\t\t\tthis[`button_${next_option_index}`].focus()\r\n\r\n\t\t\t\t\t// // Change the `value`\r\n\t\t\t\t\t// return onChange(options[next_option_index].value)\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn\r\n\t\t}\r\n\t}\r\n\r\n\tgetFocusedOptionIndex()\r\n\t{\r\n\t\tconst { options, value } = this.props\r\n\r\n\t\tlet i = 0\r\n\t\twhile (i < options.length)\r\n\t\t{\r\n\t\t\tif (document.activeElement === this[`button_${i}`]) {\r\n\t\t\t\treturn i\r\n\t\t\t}\r\n\t\t\ti++\r\n\t\t}\r\n\t}\r\n\r\n\t// Get the previous focused option index (relative to the currently selected option).\r\n\tprevious_focused_option_index()\r\n\t{\r\n\t\tconst i = this.getFocusedOptionIndex()\r\n\t\treturn i === 0 ? i : i - 1\r\n\t}\r\n\r\n\t// Get the next focused option index (relative to the currently selected option).\r\n\tnext_focused_option_index()\r\n\t{\r\n\t\tconst { options } = this.props\r\n\t\tconst i = this.getFocusedOptionIndex()\r\n\t\treturn i === options.length - 1 ? i : i + 1\r\n\t}\r\n}"]}