{"version":3,"sources":["../source/metadata.js"],"names":["compare","V2","V3","DEFAULT_EXT_PREFIX","Metadata","metadata","validateMetadata","v1","version","v2","undefined","v3","country","countries","_country","country_metadata","hasCountry","Error","countryCallingCodes","countryCallingCode","formats","_getFormats","getDefaultCountryMetadataForRegion","map","Format","_","_getNationalPrefixFormattingRule","nationalPrefix","_getNationalPrefixIsOptionalWhenFormatting","types","length","type","hasTypes","getType","Type","country_phone_code_to_countries","country_calling_codes","country_calling_code","format","_format","nationalPrefixFormattingRule","nationalPrefixIsOptionalWhenFormatting","usesNationalPrefix","test","replace","possibleLengths","is_object","Object","keys","join","type_of","getExtPrefix","ext"],"mappings":"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","file":"metadata.js","sourcesContent":["import compare from 'semver-compare'\r\n\r\n// Added \"possibleLengths\" and renamed\r\n// \"country_phone_code_to_countries\" to \"country_calling_codes\".\r\nconst V2 = '1.0.18'\r\n\r\n// Added \"idd_prefix\" and \"default_idd_prefix\".\r\nconst V3 = '1.2.0'\r\n\r\nconst DEFAULT_EXT_PREFIX = ' ext. '\r\n\r\nexport default class Metadata\r\n{\r\n\tconstructor(metadata)\r\n\t{\r\n\t\tvalidateMetadata(metadata)\r\n\r\n\t\tthis.metadata = metadata\r\n\r\n\t\tthis.v1 = !metadata.version\r\n\t\tthis.v2 = metadata.version !== undefined && compare(metadata.version, V3) === -1\r\n\t\tthis.v3 = metadata.version !== undefined // && compare(metadata.version, V4) === -1\r\n\t}\r\n\r\n\thasCountry(country)\r\n\t{\r\n\t\treturn this.metadata.countries[country] !== undefined\r\n\t}\r\n\r\n\tcountry(country)\r\n\t{\r\n\t\tif (!country)\r\n\t\t{\r\n\t\t\tthis._country = undefined\r\n\t\t\tthis.country_metadata = undefined\r\n\t\t\treturn this\r\n\t\t}\r\n\r\n\t\tif (!this.hasCountry(country))\r\n\t\t{\r\n\t\t\tthrow new Error(`Unknown country: ${country}`)\r\n\t\t}\r\n\r\n\t\tthis._country = country\r\n\t\tthis.country_metadata = this.metadata.countries[country]\r\n\t\treturn this\r\n\t}\r\n\r\n\tgetDefaultCountryMetadataForRegion()\r\n\t{\r\n\t\treturn this.metadata.countries[this.countryCallingCodes()[this.countryCallingCode()][0]]\r\n\t}\r\n\r\n\tcountryCallingCode()\r\n\t{\r\n\t\treturn this.country_metadata[0]\r\n\t}\r\n\r\n\tIDDPrefix()\r\n\t{\r\n\t\tif (this.v1 || this.v2) return\r\n\t\treturn this.country_metadata[1]\r\n\t}\r\n\r\n\tdefaultIDDPrefix()\r\n\t{\r\n\t\tif (this.v1 || this.v2) return\r\n\t\treturn this.country_metadata[12]\r\n\t}\r\n\r\n\tnationalNumberPattern()\r\n\t{\r\n\t\tif (this.v1 || this.v2) return this.country_metadata[1]\r\n\t\treturn this.country_metadata[2]\r\n\t}\r\n\r\n\tpossibleLengths()\r\n\t{\r\n\t\tif (this.v1) return\r\n\t\treturn this.country_metadata[this.v2 ? 2 : 3]\r\n\t}\r\n\r\n\t_getFormats(country_metadata)\r\n\t{\r\n\t\treturn country_metadata[this.v1 ? 2 : this.v2 ? 3 : 4]\r\n\t}\r\n\r\n\t// For countries of the same region (e.g. NANPA)\r\n\t// formats are all stored in the \"main\" country for that region.\r\n\t// E.g. \"RU\" and \"KZ\", \"US\" and \"CA\".\r\n\tformats()\r\n\t{\r\n\t\tconst formats = this._getFormats(this.country_metadata) || this._getFormats(this.getDefaultCountryMetadataForRegion()) || []\r\n\t\treturn formats.map(_ => new Format(_, this))\r\n\t}\r\n\r\n\tnationalPrefix()\r\n\t{\r\n\t\treturn this.country_metadata[this.v1 ? 3 : this.v2 ? 4 : 5]\r\n\t}\r\n\r\n\t_getNationalPrefixFormattingRule(country_metadata)\r\n\t{\r\n\t\treturn country_metadata[this.v1 ? 4 : this.v2 ? 5 : 6]\r\n\t}\r\n\r\n\t// For countries of the same region (e.g. NANPA)\r\n\t// national prefix formatting rule is stored in the \"main\" country for that region.\r\n\t// E.g. \"RU\" and \"KZ\", \"US\" and \"CA\".\r\n\tnationalPrefixFormattingRule()\r\n\t{\r\n\t\treturn this._getNationalPrefixFormattingRule(this.country_metadata) || this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())\r\n\t}\r\n\r\n\tnationalPrefixForParsing()\r\n\t{\r\n\t\t// If `national_prefix_for_parsing` is not set explicitly,\r\n\t\t// then infer it from `national_prefix` (if any)\r\n\t\treturn this.country_metadata[this.v1 ? 5 : this.v2 ? 6 : 7] || this.nationalPrefix()\r\n\t}\r\n\r\n\tnationalPrefixTransformRule()\r\n\t{\r\n\t\treturn this.country_metadata[this.v1 ? 6 : this.v2 ? 7 : 8]\r\n\t}\r\n\r\n\t_getNationalPrefixIsOptionalWhenFormatting()\r\n\t{\r\n\t\treturn !!this.country_metadata[this.v1 ? 7 : this.v2 ? 8 : 9]\r\n\t}\r\n\r\n\t// For countries of the same region (e.g. NANPA)\r\n\t// \"national prefix is optional when parsing\" flag is\r\n\t// stored in the \"main\" country for that region.\r\n\t// E.g. \"RU\" and \"KZ\", \"US\" and \"CA\".\r\n\tnationalPrefixIsOptionalWhenFormatting()\r\n\t{\r\n\t\treturn this._getNationalPrefixIsOptionalWhenFormatting(this.country_metadata) ||\r\n\t\t\tthis._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())\r\n\t}\r\n\r\n\tleadingDigits()\r\n\t{\r\n\t\treturn this.country_metadata[this.v1 ? 8 : this.v2 ? 9 : 10]\r\n\t}\r\n\r\n\ttypes()\r\n\t{\r\n\t\treturn this.country_metadata[this.v1 ? 9 : this.v2 ? 10 : 11]\r\n\t}\r\n\r\n\thasTypes()\r\n\t{\r\n\t\t// Versions 1.2.0 - 1.2.4: can be `[]`.\r\n\t\t/* istanbul ignore next */\r\n\t\tif (this.types() && this.types().length === 0) {\r\n\t\t\treturn false\r\n\t\t}\r\n\t\t// Versions <= 1.2.4: can be `undefined`.\r\n\t\t// Version >= 1.2.5: can be `0`.\r\n\t\treturn !!this.types()\r\n\t}\r\n\r\n\ttype(type)\r\n\t{\r\n\t\tif (this.hasTypes() && getType(this.types(), type))\r\n\t\t{\r\n\t\t\treturn new Type(getType(this.types(), type), this)\r\n\t\t}\r\n\t}\r\n\r\n\text()\r\n\t{\r\n\t\tif (this.v1 || this.v2) return DEFAULT_EXT_PREFIX\r\n\t\treturn this.country_metadata[13] || DEFAULT_EXT_PREFIX\r\n\t}\r\n\r\n\tcountryCallingCodes()\r\n\t{\r\n\t\tif (this.v1) return this.metadata.country_phone_code_to_countries\r\n\t\treturn this.metadata.country_calling_codes\r\n\t}\r\n\r\n\t// Formatting information for regions which share\r\n\t// a country calling code is contained by only one region\r\n\t// for performance reasons. For example, for NANPA region\r\n\t// (\"North American Numbering Plan Administration\",\r\n\t//  which includes USA, Canada, Cayman Islands, Bahamas, etc)\r\n\t// it will be contained in the metadata for `US`.\r\n\t//\r\n\t// `country_calling_code` is always valid.\r\n\t// But the actual country may not necessarily be part of the metadata.\r\n\t//\r\n\tchooseCountryByCountryCallingCode(country_calling_code)\r\n\t{\r\n\t\tconst country = this.countryCallingCodes()[country_calling_code][0]\r\n\r\n\t\t// Do not want to test this case.\r\n\t\t// (custom metadata, not all countries).\r\n\t\t/* istanbul ignore else */\r\n\t\tif (this.hasCountry(country))\r\n\t\t{\r\n\t\t\tthis.country(country)\r\n\t\t}\r\n\t}\r\n\r\n\tselectedCountry()\r\n\t{\r\n\t\treturn this._country\r\n\t}\r\n}\r\n\r\nclass Format\r\n{\r\n\tconstructor(format, metadata)\r\n\t{\r\n\t\tthis._format = format\r\n\t\tthis.metadata = metadata\r\n\t}\r\n\r\n\tpattern()\r\n\t{\r\n\t\treturn this._format[0]\r\n\t}\r\n\r\n\tformat()\r\n\t{\r\n\t\treturn this._format[1]\r\n\t}\r\n\r\n\tleadingDigitsPatterns()\r\n\t{\r\n\t\treturn this._format[2] || []\r\n\t}\r\n\r\n\tnationalPrefixFormattingRule()\r\n\t{\r\n\t\treturn this._format[3] || this.metadata.nationalPrefixFormattingRule()\r\n\t}\r\n\r\n\tnationalPrefixIsOptionalWhenFormatting()\r\n\t{\r\n\t\treturn !!this._format[4] || this.metadata.nationalPrefixIsOptionalWhenFormatting()\r\n\t}\r\n\r\n\tnationalPrefixIsMandatoryWhenFormatting()\r\n\t{\r\n\t\t// National prefix is omitted if there's no national prefix formatting rule\r\n\t\t// set for this country, or when the national prefix formatting rule\r\n\t\t// contains no national prefix itself, or when this rule is set but\r\n\t\t// national prefix is optional for this phone number format\r\n\t\t// (and it is not enforced explicitly)\r\n\t\treturn this.usesNationalPrefix() && !this.nationalPrefixIsOptionalWhenFormatting()\r\n\t}\r\n\r\n\t// Checks whether national prefix formatting rule contains national prefix.\r\n\tusesNationalPrefix()\r\n\t{\r\n\t\treturn this.nationalPrefixFormattingRule() &&\r\n\t\t\t// Check that national prefix formatting rule is not a dummy one.\r\n\t\t\tthis.nationalPrefixFormattingRule() !== '$1' &&\r\n\t\t\t// Check that national prefix formatting rule actually has national prefix digit(s).\r\n\t\t\t/\\d/.test(this.nationalPrefixFormattingRule().replace('$1', ''))\r\n\t}\r\n\r\n\tinternationalFormat()\r\n\t{\r\n\t\treturn this._format[5] || this.format()\r\n\t}\r\n}\r\n\r\nclass Type\r\n{\r\n\tconstructor(type, metadata)\r\n\t{\r\n\t\tthis.type = type\r\n\t\tthis.metadata = metadata\r\n\t}\r\n\r\n\tpattern()\r\n\t{\r\n\t\tif (this.metadata.v1) return this.type\r\n\t\treturn this.type[0]\r\n\t}\r\n\r\n\tpossibleLengths()\r\n\t{\r\n\t\tif (this.metadata.v1) return\r\n\t\treturn this.type[1] || this.metadata.possibleLengths()\r\n\t}\r\n}\r\n\r\nfunction getType(types, type)\r\n{\r\n\tswitch (type)\r\n\t{\r\n\t\tcase 'FIXED_LINE':\r\n\t\t\treturn types[0]\r\n\t\tcase 'MOBILE':\r\n\t\t\treturn types[1]\r\n\t\tcase 'TOLL_FREE':\r\n\t\t\treturn types[2]\r\n\t\tcase 'PREMIUM_RATE':\r\n\t\t\treturn types[3]\r\n\t\tcase 'PERSONAL_NUMBER':\r\n\t\t\treturn types[4]\r\n\t\tcase 'VOICEMAIL':\r\n\t\t\treturn types[5]\r\n\t\tcase 'UAN':\r\n\t\t\treturn types[6]\r\n\t\tcase 'PAGER':\r\n\t\t\treturn types[7]\r\n\t\tcase 'VOIP':\r\n\t\t\treturn types[8]\r\n\t\tcase 'SHARED_COST':\r\n\t\t\treturn types[9]\r\n\t}\r\n}\r\n\r\nexport function validateMetadata(metadata)\r\n{\r\n\tif (!metadata)\r\n\t{\r\n\t\tthrow new Error('[libphonenumber-js] `metadata` argument not passed. Check your arguments.')\r\n\t}\r\n\r\n\t// `country_phone_code_to_countries` was renamed to\r\n\t// `country_calling_codes` in `1.0.18`.\r\n\tif\r\n\t(\r\n\t\t!is_object(metadata) ||\r\n\t\t!is_object(metadata.countries) ||\r\n\t\t(!is_object(metadata.country_calling_codes) && !is_object(metadata.country_phone_code_to_countries))\r\n\t)\r\n\t{\r\n\t\tthrow new Error(`[libphonenumber-js] \\`metadata\\` argument was passed but it's not a valid metadata. Must be an object having \\`.countries\\` and \\`.country_calling_codes\\` child object properties. Got ${is_object(metadata) ? 'an object of shape: { ' + Object.keys(metadata).join(', ') + ' }' : 'a ' + type_of(metadata) + ': ' + metadata}.`)\r\n\t}\r\n}\r\n\r\n// Babel transforms `typeof` into some \"branches\"\r\n// so istanbul will show this as \"branch not covered\".\r\n/* istanbul ignore next */\r\nconst is_object = _ => typeof _ === 'object'\r\n\r\n// Babel transforms `typeof` into some \"branches\"\r\n// so istanbul will show this as \"branch not covered\".\r\n/* istanbul ignore next */\r\nconst type_of = _ => typeof _\r\n\r\nexport function getExtPrefix(country, metadata)\r\n{\r\n\treturn new Metadata(metadata).country(country).ext()\r\n}"]}